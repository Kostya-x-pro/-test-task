(()=>{"use strict";document.addEventListener("DOMContentLoaded",(async function(){const e=["de","en","es","fr","ja","pt"],t="en",n=window.location.pathname.includes("/-test-task")?"/-test-task":"";try{const o=function(){const n=new URLSearchParams(window.location.search).get("lang");if(n&&e.includes(n))return n;const o=navigator.language,a=o.split("-")[0].toLowerCase();return e.includes(o)?o:e.includes(a)?a:t}();console.log("Detected language:",o);const a=await async function e(o){try{let e=`${n}/assets/locales/${o}.json`,t=await fetch(e);if(!t.ok&&o.includes("-")){const a=o.split("-")[0];e=`${n}/assets/locales/${a}.json`,t=await fetch(e)}if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);return await t.json()}catch(n){return console.error(`Error loading ${o} translations:`,n),o!==t?(console.log(`Falling back to ${t}...`),e(t)):(console.error("Failed to load even default translations"),{})}}(o);!function(e){e&&"object"==typeof e?(document.documentElement.lang=e.langCode||"en",document.querySelectorAll("[data-i18n]").forEach((t=>{const n=t.getAttribute("data-i18n");if(void 0!==e[n])if("INPUT"===t.tagName||"TEXTAREA"===t.tagName)t.value=e[n];else{let o=e[n].replace(/\n/g,"<br>").replace("{{price}}",t.textContent.match(/\$\d+\.\d+/)?.[0]||"");t.innerHTML=o}else console.warn(`Translation key "${n}" not found`)})),document.querySelectorAll(".feature-text, .pricing-info p, .pricing-details p, .offer-badge").forEach((e=>{let t=parseFloat(window.getComputedStyle(e).fontSize);for(;e.scrollHeight>e.clientHeight&&t>10;)t-=.5,e.style.fontSize=`${t}px`}))):console.error("Invalid translations data:",e)}(a)}catch(e){console.error("Initialization error:",e)}}))})();